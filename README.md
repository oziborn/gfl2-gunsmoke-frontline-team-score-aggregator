# ドールズフロントライン2：エクシリウム 塵煙前線 チームスコア集計ツール

_機械の方が優秀なんだから 使わない手はない_

## これなに？

* 表題の通り。
* discord bot としての運用を想定
  * できるだけ既存のチーム運用を保ちつつ、（開発者以外は）追加で〜〜のアカウント作成しなければいけません。を避けるため
  * 集計しているチームはまぁdiscord使ってるでしょ想定

## 導入

* `.env.example` を参考に各種リソースと認証情報の準備
  * OCR に Cloud Vision API を使用しています。
  * 色々試した結果、無料枠や精度、知名度の都合で適していると判断しました。
* DB（mongodb）にユーザ情報（チームメンバーの名簿）を登録します。

ユーザ情報の形式

```json
{ "data": ["ユーザ名1", "ユーザ名2", "ユーザ名3", "ユーザ名4", ...] }
```

* サーバにbotを参加させた後、コマンドの登録を行います。

```shell
npm run command:register
```

* ビルドして起動します。

```shell
npm run build
npm run startbot
```

## 実行場所について

* 2025年現在、自宅サーバを持っている人でもない限り、0円で安定稼動する基盤を用意するのは難しいです。
* ここだけは安めのPaaSでホスティングするしかないと思います。

### 詳しくない人むけ

* discord bot は常時起動している必要があるため、FaaS系は適していません。
* スケーラブルなやつ（GAE等）は課金体系的に高額のため「塵煙期間外はリクエスト発生しないから安く済むでしょ？」はできないと思います。
  * 金額だけで言うと、そもそも趣味アプリに適していない。
* ローカルでbotを起動し続ければ0円ですが、、、、つけっぱなしの必要があります。
* 要件によってはサーバレス0円できるみたいです。コストだけ見ると間違いなくこちらの方が良さそうです。
  * https://dev.classmethod.jp/articles/discord-application-commands-aws-lambda-aws-cdk/

## TODO

* スコアを訂正する機能
* DBアクセスする部品の最適化
